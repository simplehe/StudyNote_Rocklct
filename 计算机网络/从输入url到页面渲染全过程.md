## 输入url到页面渲染
这是一道经典面试题，所以要好好滤清整个流程。

输入 URL 后的「回车」，这时浏览器会对 URL 进行检查，首先判断协议，如果是 http 就按照 Web 来处理，另外还会对这个 URL 进行安全检查，然后直接调用浏览器内核中的对应方法，比如 WebView 中的 loadUrl 方法。

**在浏览器内核中会先查看缓存，然后设置 UA 等 HTTP 信息，接着调用不同平台下网络请求的方法。**


总体来说之后分为以下几个过程:

 - DNS解析
 - TCP连接
 - 发送HTTP请求
 - 服务器处理请求并返回HTTP报文
 - 浏览器解析渲染页面
 - 连接结束

### DNS解析
DNS解析的过程就是寻找哪台机器上有你需要资源的过程。当你在浏览器中输入一个地址时，例如`www.baidu.com`，其实不是百度网站真正意义上的地址。互联网上每一台计算机的唯一标识是它的IP地址，但是IP地址并不方便记忆。用户更喜欢用方便记忆的网址去寻找互联网上的其它计算机，也就是上面提到的百度的网址。所以互联网设计者需要在用户的方便性与可用性方面做一个权衡，这个权衡就是一个网址到IP地址的转换，这个过程就是DNS解析。它实际上充当了一个翻译的角色，实现了网址到IP地址的转换。网址到IP地址转换的过程是如何进行的?

参见DNS笔记。


查找过程

1. 浏览器搜索自己的 DNS 缓存（维护一张域名与 IP 地址的对应表）；

2. 搜索操作系统中的 DNS 缓存（维护一张域名与 IP 地址的对应表）
3. 搜索操作系统的 hosts 文件（ Windows 环境下，维护一张域名与 IP 地址的对应表）；

4. 操作系统将域名发送至 LDNS（本地区域名服务器，如果你在学校接入互联网，则 LDNS 服务器就在学校，如果通过电信接入互联网，则 LDNS 服务器就在你当地的电信那里。）LDNS 查询自己的 DNS 缓存（一般查找成功率在 80% 左右），查找成功则返回结果，失败则发起一个迭代 DNS 解析请求；

5. LDNS 向 Root Name Server （根域名服务器，其虽然没有每个域名的的具体信息，但存储了负责每个域，如 com、net、org等的解析的顶级域名服务器的地址）发起请求，此处，Root Name Server 返回 com 域的顶级域名服务器的地址；

6. LDNS 向 com 域的顶级域名服务器发起请求，返回 baidu.com 域名服务器地址；

7. LDNS 向 baidu.com 域名服务器发起请求，得到 www.baidu.com 的 IP 地址；

8. LDNS 将得到的 IP 地址返回给操作系统，同时自己也将 IP 地址缓存起来；

9. 操作系统将 IP 地址返回给浏览器，同时自己也将 IP 地址缓存起来；

至此，浏览器已经得到了域名对应的 IP 地址。
