## 位运算

无论是算法题当中还是面试题当中经常能见到有关位运算的知识点。所以特地整理一下，来攻破它。

在c语言中&表示与，|表示或，^表示异或。~代表取反，<<代表左移，>>代表右移。

注意左移的时候是低位全部补0的。但是右移的话要注意了，分为两种，一种是**算术右移**，高位补符号位。一种是**逻辑右移**，高位补0.微软的vc6.0和vs2008都是算数右移。

常用的位运算有一下几种小技巧。

### 位运算技巧

#### 判断奇偶

``` c++
if(a&1)
```

#### 交换两数

``` c++
a ^= b
b ^= a
a ^= b
```

#### 符号变换

``` c++
a = ~a +1;
```

记住，取反加一便是正数变为负数，负数变为正数。

同理，若是取绝对值的话，就加上判断处理。先取符号位，再返回值。

（**要记得计算机内都是用补码来存数字，所以负数的补码是其符号位不变，取反+1**）

``` c++
int my_abs(int a)
{
    int i = a >> 31;
    return i == 0 ? a : (~a + 1);
}
```

#### 找出二进制数最右边的1的位置

可以经过证明，以下方法可以快速找出最右边的1所在的位置所代表的数值。
比如1100 = 12
在计算机中负数是补码取反加1
因此 -12 = 0011+1 = 0100
1100 & 0100 = 0100
所以lowbit函数求得最右边置1时的数字为4
``` c++
int lowbit(int x)
{
    return x&(-x);
}
```

#### 去除二进制最右边的1

`n&(n-1)`

该位运算是去除 n 的位级表示中最低的那一位。例如对于二进制表示 10110100，减去 1 得到 10110011，这两个数相与得到 10110000。最右边的1被去掉了。

### 高级技巧

#### 状态压缩
一个bool占一个字节还是太多了，如果一个字节可以分成八位来用能压缩许多状态。所以实际上一个bool是可以用作8分bool用的。

#### 高低位交换

假定高低位各占8位
``` c++
a = (a >> 8) | (a << 8);
```

### 奇偶位交换

以双字节正数为例，奇数位清0移动一位|偶数位清0移动一位 实现奇偶位交换
``` c++
x = ((x & 0xAAAA) >> 1) | ((x & 0x5555) << 1);
```
